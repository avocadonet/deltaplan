# **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ-–¥–æ—Å—É–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ "–î–µ–ª—å—Ç–∞"**

"–î–µ–ª—å—Ç–∞" ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É—á–µ–±–Ω–æ–π –∏ –≤–Ω–µ–∫–ª–∞—Å—Å–Ω–æ–π –∂–∏–∑–Ω–∏ –ª–∏—Ü–µ—è. –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –±—ç–∫–µ–Ω–¥ –Ω–∞ Django –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –∏ API, –∞ —Ç–∞–∫–∂–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Flutter –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

## **‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:

*   **–ë—ç–∫–µ–Ω–¥:** Python, Django, Django REST Framework.
*   **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** Dart, Flutter (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Android, iOS, Web).
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL.
*   **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:** Docker, Docker Compose.
*   **Production-—Å–µ—Ä–≤–µ—Ä:** Gunicorn (–∫–∞–∫ WSGI-—Å–µ—Ä–≤–µ—Ä) –∏ Nginx (–∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏).

–í –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ Nginx –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–∞–∑–¥–∞–≤–∞—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flutter –∏ –ø—Ä–æ–∫—Å–∏—Ä—É—è API-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –±—ç–∫–µ–Ω–¥.

## **üõ†Ô∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑)**

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
1.  **Docker –∏ Docker Compose:** [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](https://docs.docker.com/get-docker/).
2.  **Flutter SDK:** [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](https://flutter.dev/docs/get-started/install).
3.  **Git:** –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/avocadonet/deltaplan.git
cd deltaplan
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ —Ç—Ä–µ–±—É—é—Ç—Å—è —Ñ–∞–π–ª—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –±—ç–∫–µ–Ω–¥–∞.

1.  **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –°–æ–∑–¥–∞–π—Ç–µ –≤ –ø–∞–ø–∫–µ `backend/` —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–µ.
2.  **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –°–æ–∑–¥–∞–π—Ç–µ –≤ –ø–∞–ø–∫–µ `backend/` —Ñ–∞–π–ª `.env_prod` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–µ.

**–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ production-—Å–µ–∫—Ä–µ—Ç—ã –≤ Git!** –§–∞–π–ª—ã `.env` –∏ `.env_prod` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`.

#### **–ü—Ä–∏–º–µ—Ä `backend/.env` (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):**
```dotenv
# –ö–ª—é—á –¥–ª—è Django. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –¥–ª–∏–Ω–Ω–æ–π —Å–ª—É—á–∞–π–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.
SECRET_KEY='django-insecure-your-secret-key-for-development'

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏. 'True' –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
DEBUG=True

# –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å '*')
ALLOWED_HOSTS=*

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
POSTGRES_DB=deltaplan_dev
POSTGRES_USER=user_dev
POSTGRES_PASSWORD=password_dev
DB_HOST=postgres_dev
DB_PORT=5432
```

#### **–ü—Ä–∏–º–µ—Ä `backend/.env_prod` (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**
```dotenv
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!
SECRET_KEY='your-super-secret-and-long-production-key'

# –û—Ç–ª–∞–¥–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–∞!
DEBUG=False

# –£–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ –∏ IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞.
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ localhost –∏ 127.0.0.1
ALLOWED_HOSTS=your_domain.com,www.your_domain.com,127.0.0.1,localhost

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_DB=deltaplan_prod
POSTGRES_USER=user_prod
POSTGRES_PASSWORD=super_secret_password_prod
DB_HOST=postgres_prod
DB_PORT=5432
```

## **üöÄ –†–µ–∂–∏–º 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Local Development)**

–≠—Ç–æ—Ç —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–¥–∞. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç **hot-reload** –¥–ª—è –±—ç–∫–µ–Ω–¥–∞ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞. Nginx –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

### **–ó–∞–ø—É—Å–∫ Backend + –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
–í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º docker-compose.yml, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
# --build –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è Dockerfile/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
docker compose up
```
*   –ë—ç–∫–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000/`.
*   API, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–∞ `http://localhost:8000/api/`.

### **–ó–∞–ø—É—Å–∫ Frontend (Flutter):**
Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `http://...:8000/api/` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

1.  –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ:
    ```bash
    cd frontend
    flutter pub get
    flutter run -d chrome  # –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (chrome, —ç–º—É–ª—è—Ç–æ—Ä –∏ —Ç.–¥.)
    ```

### **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
docker compose down
```

## **üöÄ –†–µ–∂–∏–º 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Production-—Å–±–æ—Ä–∫–∏**

–≠—Ç–æ—Ç —Ä–µ–∂–∏–º —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Nginx** –∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏, **Gunicorn** –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∏ **–≤–µ–±-—Å–±–æ—Ä–∫–∞ Flutter**. Hot-reload **–æ—Ç–∫–ª—é—á–µ–Ω**.

### **–®–∞–≥ 1: –°–±–æ—Ä–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Flutter**
–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –∏–ª–∏ –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, —Å–æ–±–µ—Ä–∏—Ç–µ –µ–≥–æ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º URL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
```bash
cd frontend
flutter build web --dart-define=API_URL=http://127.0.0.1:8080/api/ --dart-define=API_URL_ANDROID=http://10.0.2.2:8080/api/
cd ..
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É `frontend/build/web`, –∫–æ—Ç–æ—Ä—É—é Nginx –±—É–¥–µ—Ç —Ä–∞–∑–¥–∞–≤–∞—Ç—å –∫–∞–∫ —Å–∞–π—Ç.

### **–®–∞–≥ 2: –ó–∞–ø—É—Å–∫ Production-—Å–±–æ—Ä–∫–∏**
–ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π `docker-compose.prod.yml` —Ñ–∞–π–ª.
```bash
# –§–ª–∞–≥ -f —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
# –§–ª–∞–≥ -d (detach) –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
docker compose -f docker-compose.prod.yml up --build -d
```
*   –í–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É **`http://127.0.0.1:8080/`**.
*   –ó–∞–ø—Ä–æ—Å—ã –∫ API, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞–µ—Ç Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ `http://127.0.0.1:8080/api/`.

### **–®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ Django (–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
–ö–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–µ–∂–∏–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º production-—Ñ–∞–π–ª–∞.

*   **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ!):
    ```bash
    docker compose -f docker-compose.prod.yml exec backend_prod python manage.py migrate
    ```
*   **–°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–∞ `http://127.0.0.1:8080/admin/`):
    ```bash
    docker compose -f docker-compose.prod.yml exec backend_prod python manage.py createsuperuser
    ```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ —Ñ–æ–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
docker compose -f docker-compose.prod.yml logs -f backend_prod
docker compose -f docker-compose.prod.yml logs -f nginx
```

### **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ Production-—Å–±–æ—Ä–∫–∏:**
```bash
docker compose -f docker-compose.prod.yml down
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏ —É–¥–∞–ª–∏—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å production-–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º (`_prod`).